#!/usr/bin/env node

const {buildConfigs, logger} = require('../src/services.js')

async function main () {
  const [,, ...configPaths] = process.argv

  if (configPaths.length < 1) return die('Usage: iconduit <config-path>...')

  await buildConfigs(...configPaths)
}

main().catch(({stack}) => { die(stack) })

function die (message) {
  logger.error(message)
  process.exit(1)
}
